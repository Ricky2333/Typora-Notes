# 实验七 存储器管理



## 实验目的

理解 **内存页面调度原理**、掌握几种理论 **页面置换算法** 的实现方法、通过实验比较各种调度算法的优劣；

页面置换算法是虚拟存储管理实现的关键，通过本次实验理解内存页面调度的机制，在模拟实现FIFO、LRU、NRU和OPT几种经典的页面置换算法的基础上，比较各种置换算法的效率及优缺点，从而了解虚拟存储实现的过程



## 实验原理

### 1. 进程通信概述







（1） 先进先出的算法FIFO 

（2） 最近最少使用的算法LRU

（3） 最近未使用的算法NUR 

（4） 理想型算法OPT





#### 1.1 进程通信简介

进程间通信(Inter-Process Communication)是指多个进程之间相互通信，交换信息的方法

Linux环境下，进程的地址空间相互独立，任何一个进程的全局变量在另一个进程中都看不到，所以进程和进程间不能互相访问，要交换数据必须通过内核，在内核中开辟一块缓存区，进程1把数据从用户空间拷贝到内存缓冲区，进程2再从内存缓冲区中把数据读走，内核提供的这种机制称为进程间通信（IPC）

#### 1.2 进程通信目的

+ 传输数据
+ 共享数据/资源
+ 通知事件
+ 进程控制

#### 1.3 进程通信方式

+ 管道/FIFO
+ 消息队列
+ 共享内存
+ 信号量
+ 信号
+ Socket



### 2. 进程通信的6方式

#### 2.1 Pipe/FIFO

[pipe&FIFO视频详解—bilibili](https://www.bilibili.com/video/BV1Q34y1U7xq/?spm_id_from=333.788)

#### 2.2 消息队列

[消息队列相关函数详解—CSDN](https://blog.csdn.net/weixin_51363326/article/details/116890729)

#### 2.3 共享内存

[共享内存相关函数详解—C语言技术网](http://www.freecplus.net/6cb9ad02d7d64d6eb2f8e241b1158aed.html)

#### 2.4 信号量

[信号量相关函数详解—C语言技术网](http://www.freecplus.net/91049192da9e435a92209b287a220af8.html)

#### 2.5 信号

[信号视频详解—bilibili](https://www.bilibili.com/video/BV1aR4y1n7EU/?spm_id_from=333.788)



## 实验作业

### 1. ftok.c实践

#### 源代码

```c

```

#### 问题描述

> 程序的运行结果是什么？请简单分析

#### 程序运行截图

![image-20220605222818418](https://tva1.sinaimg.cn/large/e6c9d24ely1h2xqkmxgutj219o084762.jpg)

#### 结果分析

+ 代码用一个for循环，生成了5个键值



### 2. sendmsg.c实践

#### 源代码

```c

```

#### 问题描述

> 程序的运行结果是什么？请简单分析

#### 程序运行截图

![image-20220605225406184](https://tva1.sinaimg.cn/large/e6c9d24ely1h2xrbfxsqcj21bu036q47.jpg)

#### 结果分析

+ 从运行结果来看，本次操作成功把消息"Hello,message queue"写入了消息队列中，无报错提示



### 3. rcvmsg.c实践

#### 源代码

```c

```

#### 问题描述

> 编译运行，分析程序运行结果

#### 程序运行截图

![image-20220605231002981](https://tva1.sinaimg.cn/large/e6c9d24ely1h2xrs1b1e8j21a802sdgn.jpg)

#### 结果分析

+ 从运行结果来看，本次操作成功读取了sendmsg.c中写入消息队列中的消息，并且将其输出在屏幕上



### 4. server.c / client.c实践

#### server.c源代码

```c

```

#### client.c源代码

```c

```

#### 问题描述

> 首先在终端上编译并运行 server.c再在另外一个终端上编译运行client.c，观察client的运行结果，分析程序的执行过程
>

#### 程序运行截图

client窗口

![image-20220606103627130](https://tva1.sinaimg.cn/large/e6c9d24ely1h2ybmmiulwj21ao086myv.jpg)

server窗口

![image-20220606102106981](https://tva1.sinaimg.cn/large/e6c9d24ely1h2yb69nbkpj21ai044aaz.jpg)

#### 结果分析

+ 在client窗口，不断输出剩余的可用资源数量
+ 在server窗口，不断对可用资源进行信号量操作，即每3秒减少一个资源



### 5. wrshm.c / rdshm.c实践

#### wrshm.c源代码

```c

```

#### rdshm.c源代码

```c

```

#### sharemen.h源代码

```c

```

#### 问题描述

> 编译两个程序，同时在两个终端运行writer和reader，在writer端输入字符串 “hello，reader”，等待一会，看到reader端输出后，在writer.c端的提示符后面输入 字符串“new information”
>
> 运行的结果是什么？请分析程序的执行过程

#### 程序运行截图

writer窗口

![image-20220606142627406](https://tva1.sinaimg.cn/large/e6c9d24ely1h2yi9jzbo2j21a005k75q.jpg)

reader窗口

![image-20220606142552950](https://tva1.sinaimg.cn/large/e6c9d24ely1h2yi8yerjtj21a6042gn1.jpg)

#### 结果分析

+ 从运行结果来看，本次操作成功利用共享内存与信号量，完成了writer与reader进程间的通信











